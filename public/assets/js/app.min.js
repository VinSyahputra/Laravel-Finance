function initSidebarToggler() {
    // Set sidebar type based on screen width
    const setsidebartype = function () {
        const width = window.innerWidth > 0 ? window.innerWidth : screen.width;
        if (width < 1199) {
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
            $("#main-wrapper").addClass("mini-sidebar");
        } else {
            $("#main-wrapper").attr("data-sidebartype", "full");
            $("#main-wrapper").removeClass("mini-sidebar");
        }
    };

    // Initial trigger and on resize
    $(window).off("ready", setsidebartype).on("ready", setsidebartype);
    $(window).off("resize", setsidebartype).on("resize", setsidebartype);

    // Sidebar toggler click
    $(".sidebartoggler").off("click").on("click", function () {
        console.log("burger on click");

        $("#main-wrapper").toggleClass("mini-sidebar");
        const isMini = $("#main-wrapper").hasClass("mini-sidebar");

        $(".sidebartoggler").prop("checked", isMini);
        $("#main-wrapper").attr("data-sidebartype", isMini ? "mini-sidebar" : "full");
    });

    // Show sidebar on toggle (second handler)
    $(".sidebartoggler").off("click.show").on("click.show", function () {
        $("#main-wrapper").toggleClass("show-sidebar");
    });
}

// First-time run
$(function () {
    initSidebarToggler();
});

// Run again after Livewire route navigation
document.addEventListener("livewire:navigated", () => {
    initSidebarToggler();
});
